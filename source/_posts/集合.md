---
title: 集合
date: 2021-05-05 13:32:50
categories: 
- Java
tags:
---

## Java集合框架

Java 集合框架主要包括两种类型的容器，一种是集合（Collection），存储一个元素集合，另一种是图（Map），存储键/值对映射。

## Collection

Collection 接口有 3 种子类型，List、Set 和 Queue，再下面是一些抽象类，最后是具体实现类。

![](../../_media/image/1378215-20190715205443557-231982257.png)

集合类的基本接口是Collection接口，并且Collection接口扩展了Iterable接口。

```java
public interface Iterable<E> {
    Iterator<E> iterator();
	...
}

public interface Collection<E> extends Iterable<E> {
    boolean add(E element); 
	...
}
```

#### List

有序容器，允许重复元素，可以插入null。

+ **ArrayList**

  底层是数组，线程不安全。

  ```java
  // 扩容算法，1.5倍
  private void grow(int minCapacity) {
      ....
      int newCapacity = oldCapacity + (oldCapacity >> 1);
      ....
      elementData = Arrays.copyOf(elementData, newCapacity);
  }
  ```

  

+ **Vector**

  底层是数组，线程安全

  ```java
  // 扩容算法，2.0倍
  private void grow(int minCapacity) {
      ...
      int newCapacity = oldCapacity + ((capacityIncrement > 0) ? capacityIncrement : oldCapacity);
      ...
      elementData = Arrays.copyOf(elementData, newCapacity);
  }
  ```
  
+ **LinkedList**

  底层是双向链表，线程不安全。同时该类实现了`Queue`接口。扩展了Iterator接口，以此实现反向遍历。

#### Set

无序容器，不允许重复元素，只能存放一个null。Set没有对Collection接口进行扩充，所有使用的方法都是Collection接口定义的。

+ **HashSet**

  底层是HashMap，线程不安全，无序。

  其子类`LinkedHashSet`是有序的，也就是说遍历顺序和插入顺序是一致的，其底层是LinkedHashMap，线程不安全。

+ **TreeSet**

  底层是TreeMap，线程不安全。当插入自定义元素时，要实现Comparable接口进行排序。

#### Queue

线程安全的数据结构，常用于高并发环境。

+ **ArrayDeque**

  双端队列

+ **PriorityQueue**

  优先级队列，底层数据结构为堆。当插入自定义函数时，要实现Comparable接口的类对象，或者在构造器中提供Comparator对象。

## Map

Map接口实现的是键值对的存储，比较常见的是HashMap、HashTable、TreeMap。

![](../../_media/image/1378215-20190715205452545-754376322.png)

#### HashMap

底层是数组+链表+红黑树，线程不安全，无序。

+ LinkedHashMap：HashMap的子类，有序。

#### HashTable

底层是数组+链表，线程安全，无序。

#### TreeMap

底层是二叉树，线程不安全，有序。